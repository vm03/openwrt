diff -r -U2 linux-4.9.31.orig/arch/mips/boot/dts/cavium-octeon/Makefile linux-4.9.31/arch/mips/boot/dts/cavium-octeon/Makefile
--- linux-4.9.31.orig/arch/mips/boot/dts/cavium-octeon/Makefile	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/boot/dts/cavium-octeon/Makefile	2017-06-21 17:32:11.930801951 -0400
@@ -1,3 +1,4 @@
 dtb-$(CONFIG_CAVIUM_OCTEON_SOC)	+= octeon_3xxx.dtb octeon_68xx.dtb
+dtb-$(CONFIG_CAVIUM_OCTEON_DAP)	+= dlink_dap_2590.dtb
 
 obj-y				+= $(patsubst %.dtb, %.dtb.o, $(dtb-y))
diff -r -U2 linux-4.9.31.orig/arch/mips/cavium-octeon/Kconfig linux-4.9.31/arch/mips/cavium-octeon/Kconfig
--- linux-4.9.31.orig/arch/mips/cavium-octeon/Kconfig	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/cavium-octeon/Kconfig	2017-06-21 17:33:10.158802998 -0400
@@ -35,4 +35,14 @@
 	  option.
 
+config CAVIUM_OCTEON_DAP
+	bool "Buid a kernel for D-LINK DAP bootloaders"
+	default "n"
+	depends on !CAVIUM_OCTEON_2ND_KERNEL
+	help
+	  This option configures this kernel to be linked at the normal
+	  octeon load address despite being run on a SOC.  This is what D-LINK
+	  DAP device bootloaders do with single lzma ELF images.  The option
+	  also loads a DAP-specific device tree internally.
+
 config CAVIUM_OCTEON_LOCK_L2
 	bool "Lock often used kernel code in the L2"
diff -r -U2 linux-4.9.31.orig/arch/mips/cavium-octeon/Platform linux-4.9.31/arch/mips/cavium-octeon/Platform
--- linux-4.9.31.orig/arch/mips/cavium-octeon/Platform	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/cavium-octeon/Platform	2017-06-21 17:33:27.446803308 -0400
@@ -10,2 +10,4 @@
 load-$(CONFIG_CAVIUM_OCTEON_SOC)	+= 0xffffffff81100000
 endif
+
+load-$(CONFIG_CAVIUM_OCTEON_DAP)        = 0xffffffff80100000
diff -r -U2 linux-4.9.31.orig/arch/mips/cavium-octeon/setup.c linux-4.9.31/arch/mips/cavium-octeon/setup.c
--- linux-4.9.31.orig/arch/mips/cavium-octeon/setup.c	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/cavium-octeon/setup.c	2017-06-21 17:33:52.178803752 -0400
@@ -1182,4 +1182,5 @@
 extern const char __dtb_octeon_3xxx_begin;
 extern const char __dtb_octeon_68xx_begin;
+extern const char __dtb_dlink_dap_2590_begin;
 void __init device_tree_init(void)
 {
@@ -1208,5 +1209,10 @@
 		fill_mac = true;
 	} else {
+/* TODO: runtime detection or appended device tree */
+#ifdef CONFIG_CAVIUM_OCTEON_DAP
+		fdt = &__dtb_dlink_dap_2590_begin;
+#else
 		fdt = &__dtb_octeon_3xxx_begin;
+#endif
 		do_prune = true;
 		fill_mac = true;
diff -r -U2 linux-4.9.31.orig/arch/mips/configs/cavium_octeon_defconfig linux-4.9.31/arch/mips/configs/cavium_octeon_defconfig
--- linux-4.9.31.orig/arch/mips/configs/cavium_octeon_defconfig	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/configs/cavium_octeon_defconfig	2017-06-21 17:38:29.026808726 -0400
@@ -1,3 +1,4 @@
 CONFIG_CAVIUM_OCTEON_SOC=y
+# CONFIG_CAVIUM_OCTEON_DAP is not set
 CONFIG_CAVIUM_CN63XXP1=y
 CONFIG_CAVIUM_OCTEON_CVMSEG_SIZE=2
diff -r -U2 linux-4.9.31.orig/arch/mips/pci/pci-octeon.c linux-4.9.31/arch/mips/pci/pci-octeon.c
--- linux-4.9.31.orig/arch/mips/pci/pci-octeon.c	2017-06-07 06:08:04.000000000 -0400
+++ linux-4.9.31/arch/mips/pci/pci-octeon.c	2017-06-21 17:34:31.734804463 -0400
@@ -205,4 +205,7 @@
 	 * INTD# = 3)
 	 */
+	if (of_machine_is_compatible("dlink,dap-2590"))
+		/* Only one pin actually tested, rest may be wrong */
+		return "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB";
 	if (of_machine_is_compatible("dlink,dsr-500n"))
 		return "CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";
